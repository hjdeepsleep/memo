# cc4주차

---

## 재설계
* 레거시를 새로운 프로젝트로 생성하지 말고
레거시를 리팩토링해서 클린코드를 구현하는 능력이 중요함
* 교육과정에서 배운것을을 실업무에서 적용해보는것이 중요하다!

## 점진적으로 리팩토링 하기
### 점진적 리팩토링
* 마주하는 상황 1
    * 메소드에 인자가 추가 되었을때 -> 메서드를 사용하던 곳들을 따라다니며 수정
    * 인스턴스 변수의 타입이 변경 되었을때 -> 변수를 사용하던곳을 따라다니며 수정
* 이런 방식으로 리팩토링을 진행하면 오히려 부정적인 측면이 생길 수 있다.
### 좋은 리팩토링은?
* 컴파일 에러가 발생하지 않는 리팩토링    
* 인자가 추가 되는 경우
    * 변경 하려믄 메소드를 그대로 복사해 중복으로 만든다(임시 생성)
    * 예를 들어 match()면 match2()를 생성 (이름은 중요하지 않다)
    * match()를 사용하는 모든 코드들을 match2()를 사용도록 변경한다.
    * mateh()를 사용하는곳이 없어지면 이를 제거 한다.
    * match2()를 match()로 수정한다.
* 인스턴스 변수가 변경 되는 경우
    * 새로운 타입의 인스턴스 변수를 추가한다.
    * String에서 Integer로 변경한다면 일시적으로 두개를 동시에 가진다

## TDD에 감이 생길때 도전
1. 메소드를 다른 클래스로 이동
1. 메서드에 인자 타입이나 수, 반환 값이 변경 되는 경우
1. 인스턴수 변수 타입이 변경 되는 경우

## TDD로 리팩토링 하기
* 자신이 생각하기에 불안한 점이 없을 때 까지만 test코드를 작성한다.
* 리팩토링은 시간을 내서 하는것이 아니라 항상 진행하는것이다.
* 리팩토링을 한번에 모아서 하지 말고 점진적 리팩토링으로 진행 한다.

## 객체지향 설계 및 구현 접근 방식
1. Bottom UP 구현 및 설계
    * 구현에 초점을 맞춰 구현한 후에 리팩토링을 통해 겍체의 역학, 책임, 협력을 찾아 개선해 나가는 접근 방식
1. Top down 설계 및 구현
    * 전체 적인 방향과 흐름을 설계 한 후에 구현하는 방식

## 책임 주도 설계
* 책임이란?
    * 객체에 의해 정의 되는 응집도 있는 행위의 집합
    * 정보와 수행할수 있는 행동에 대해 개력적으로 서술한 문장
    * '무엇을 알고 있는가?', '무엇을 할 수 있는가' 로 구성 된다.
## 책임 주도 설계란?
* 프로그램의 책임을 찾고 책음을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계 하는 방법
* 설계 과정
    * 시스템의 책임을 파악
    * 시트템 책을을 작은 단위로 분할
    * 객체 또는 역할을 찾아 책임을 할당
    * 책임간의 상호 작용을 구현
* 단일 책임 원칙에 따라 객체들이 하나의 책임을 가지고 있는지 판단해 본다.
* 역할을 interface로 구현한다.
* 책임주도 설계로 책임과 역할을 찾다보면 interface(역할)를 찾을수 있다
* 컴파일 타임 의존성 vs 런타임 의존성
    * 런타임 의존성을 이용하도록 하자
* interface를 잘 도출하 수 있는 연습을 해야 한다.



---

### 스프링의 인터페이스 전략
ioc 컨테이터
bean 팩토리

### 테스트 코드를 작성하다 보면 유연한 코드를 작성하게 된다.
* mock를 이용해 서비스단의 테스트 코드를 모두 작성 한 후 리팩토링을 진행해야 한다.
* setter 뿐만 아니라 getter 도 사용을 지양해야 한다!!!